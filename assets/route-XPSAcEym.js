import{N as e,R as t,j as n,k as r,z as i}from"./chunk-JZWAC4HX-DMio0XPM.js";import"./ToastMessages.busEvents-CfcB4EIc.js";import{t as a}from"./jsx-runtime-xdwC5iDu.js";import"./Svg-Bo1LYJ9e.js";import{n as o,r as s,t as c}from"./FullscreenModalButtons-LpR32IRS.js";import{o as l}from"./packages-CR-KDM1P.js";import{t as u}from"./ItemCard-DIyTdqtf.js";import{t as d}from"./Input-XyNqaCmh.js";import"./Button-U_4Ymssz.js";import{t as f}from"./clients-DQQRwYQZ.js";import{t as p}from"./Textarea-D5SdiV3n.js";var m=a(),h=i();const g=async({params:e})=>{let{id:t}=e;if(!t)throw new Response(`Client ID is required`,{status:400});let n=await f.getById(t);if(!n)throw new Response(`Client not found`,{status:404});return{client:n}};var _=t(()=>{let t=e(),{client:i}=n(),{data:a,state:f,reset:g,Form:_}=r(),v=f!==`idle`;return(0,h.useEffect)(()=>{!v&&a&&!a.error&&s.message({type:`success`,message:`Клиент успешно обновлен`}),a?.error&&s.message({type:`error`,message:`Что-то пошло не так`,details:`Пожалуйста попробуйте снова`}),a&&t(-1)},[v,a,g,t,f]),(0,m.jsx)(_,{method:`post`,action:`/clients`,children:(0,m.jsxs)(l,{children:[(0,m.jsx)(`input`,{type:`hidden`,name:`actionType`,value:`createOrUpdate`}),(0,m.jsx)(o,{color:`tertiary`,children:`Редактирование клиента`}),(0,m.jsxs)(u,{children:[(0,m.jsx)(d,{label:`Имя *`,type:`text`,name:`name`,required:!0,defaultValue:i.name}),(0,m.jsx)(d,{label:`Телефон`,type:`tel`,name:`phone`,defaultValue:i.phone}),(0,m.jsx)(p,{label:`Заметки`,name:`notes`,defaultValue:i.notes,rows:3})]}),(0,m.jsx)(c,{onClose:()=>t(-1),disabled:v,closeLabel:`Отмена`,submitLabel:`Сохранить`})]})})});export{g as clientLoader,_ as default};
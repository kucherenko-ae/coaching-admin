import{N as e,R as t,j as n,k as r,z as i}from"./chunk-JZWAC4HX.B5xnh8v2.js";import"./ToastMessages.busEvents.rtsizd_v.js";import{t as a}from"./jsx-runtime.CWlfk1IU.js";import"./Svg.8sPTxAw7.js";import{n as o,r as s,t as c}from"./FullscreenModalButtons.WN75SBcn.js";import{o as l}from"./packages.DEKZB-8t.js";import{t as u}from"./ItemCard.D3Xi8u2x.js";import{t as d}from"./Input.DT_H2j8k.js";import"./Button.kaO_hKy8.js";import{t as f}from"./clients.BJCayMAs.js";import{t as p}from"./Textarea.BG1C_yOC.js";var m=a(),h=i();const g=async({params:e})=>{let{id:t}=e;if(!t)throw new Response(`Client ID is required`,{status:400});let n=await f.getById(t);if(!n)throw new Response(`Client not found`,{status:404});return{client:n}};var _=t(()=>{let t=e(),{client:i}=n(),{data:a,state:f,reset:g,Form:_}=r(),v=f!==`idle`;return(0,h.useEffect)(()=>{!v&&a&&!a.error&&s.message({type:`success`,message:`Клиент успешно обновлен`}),a?.error&&s.message({type:`error`,message:`Что-то пошло не так`,details:`Пожалуйста попробуйте снова`}),a&&t(-1)},[v,a,g,t,f]),(0,m.jsx)(_,{method:`post`,action:`/clients`,children:(0,m.jsxs)(l,{children:[(0,m.jsx)(`input`,{type:`hidden`,name:`actionType`,value:`createOrUpdate`}),(0,m.jsx)(o,{color:`tertiary`,children:`Редактирование клиента`}),(0,m.jsxs)(u,{children:[(0,m.jsx)(d,{label:`Имя *`,type:`text`,name:`name`,required:!0,defaultValue:i.name}),(0,m.jsx)(d,{label:`Телефон`,type:`tel`,name:`phone`,defaultValue:i.phone}),(0,m.jsx)(p,{label:`Заметки`,name:`notes`,defaultValue:i.notes,rows:3})]}),(0,m.jsx)(c,{onClose:()=>t(-1),disabled:v,closeLabel:`Отмена`,submitLabel:`Сохранить`})]})})});export{g as clientLoader,_ as default};
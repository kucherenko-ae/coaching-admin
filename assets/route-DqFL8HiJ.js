import{N as e,R as t,j as n,k as r,z as i}from"./chunk-JZWAC4HX-pontpNwO.js";import"./ToastMessages.busEvents-DhP_PnDg.js";import{t as a}from"./jsx-runtime-Dg8orHAx.js";import"./Svg-Boi9_9HN.js";import{n as o,r as s,t as c}from"./FullscreenModalButtons-C81AW3dn.js";import{o as l}from"./packages-TGpPiuli.js";import{t as u}from"./ItemCard-sX9X9Rp8.js";import{t as d}from"./Input-Cb6DeJHz.js";import"./Button-B34oQnwm.js";import{t as f}from"./clients-CSXVs_1P.js";import{t as p}from"./Textarea-Dt2n-yRC.js";var m=a(),h=i();const g=async({params:e})=>{let{id:t}=e;if(!t)throw new Response(`Client ID is required`,{status:400});let n=await f.getById(t);if(!n)throw new Response(`Client not found`,{status:404});return{client:n}};var _=t(()=>{let t=e(),{client:i}=n(),{data:a,state:f,reset:g,Form:_}=r(),v=f!==`idle`;return(0,h.useEffect)(()=>{!v&&a&&!a.error&&s.message({type:`success`,message:`Клиент успешно обновлен`}),a?.error&&s.message({type:`error`,message:`Что-то пошло не так`,details:`Пожалуйста попробуйте снова`}),a&&t(-1)},[v,a,g,t,f]),(0,m.jsx)(_,{method:`post`,action:`/clients`,children:(0,m.jsxs)(l,{children:[(0,m.jsx)(`input`,{type:`hidden`,name:`actionType`,value:`createOrUpdate`}),(0,m.jsx)(`input`,{type:`hidden`,name:`clientId`,value:i.id}),(0,m.jsx)(o,{color:`tertiary`,children:`Редактирование клиента`}),(0,m.jsxs)(u,{children:[(0,m.jsx)(d,{label:`Имя *`,type:`text`,name:`name`,required:!0,defaultValue:i.name}),(0,m.jsx)(d,{label:`Телефон`,type:`tel`,name:`phone`,defaultValue:i.phone}),(0,m.jsx)(p,{label:`Заметки`,name:`notes`,defaultValue:i.notes,rows:3})]}),(0,m.jsx)(c,{onClose:()=>t(-1),disabled:v,closeLabel:`Отмена`,submitLabel:`Сохранить`})]})})});export{g as clientLoader,_ as default};